# 老金优品 - 最终启动指南

## 快速启动（推荐）

### 方法1：使用启动脚本

```bash
# 确保在项目目录
cd /root/content-distribution

# 给脚本执行权限并运行
chmod +x start-simple.sh
./start-simple.sh
```

### 方法2：手动启动

```bash
# 1. 确保在正确目录
cd /root/content-distribution

# 2. 检查文件是否存在
ls src/app.js

# 3. 确认依赖已安装
ls node_modules/aws-sdk
ls node_modules/dotenv

# 4. 如果依赖缺失，安装它们
npm install aws-sdk dotenv

# 5. 启动应用
node src/app.js
```

## 预期输出

启动成功后，您应该看到：

```
✅ MongoDB 已连接
📁 本地存储模式：文件将保存在本地 (如果B2未配置)
或
☁️ 云存储模式：Backblaze B2 (如果B2配置正确)
🚀 Server running at http://localhost:3000
📁 Upload directory: /root/content-distribution/uploads
```

## 功能验证

1. **访问网站**：http://localhost:3000
2. **上传测试**：尝试上传图片或视频文件
3. **分类浏览**：点击不同分类查看内容
4. **搜索功能**：使用搜索框查找内容

## 常见问题解决

### 1. "Cannot find module" 错误
```bash
# 重新安装所有依赖
cd /root/content-distribution
npm install
```

### 2. 路径错误
确保您在 `/root/content-distribution` 目录中运行命令，而不是 `/root/` 目录。

### 3. 端口被占用
```bash
# 查找占用3000端口的进程
lsof -i :3000

# 杀死进程（替换PID）
kill -9 <PID>
```

### 4. MongoDB连接失败
检查MongoDB服务是否运行：
```bash
systemctl status mongod
# 或
sudo service mongodb start
```

## B2云存储配置

如果需要启用B2云存储：

1. 确保 `src/config/production.env` 文件包含正确的B2凭证
2. 重启应用即可自动启用云存储

## 系统架构

- **前端**: EJS模板 + 现代CSS + 响应式设计
- **后端**: Express.js + MongoDB + Multer文件上传
- **存储**: 本地存储 + Backblaze B2云存储（可选）
- **安全**: JWT认证 + 付费下载控制

## 技术支持

如果遇到问题：

1. 检查所有文件是否在正确位置
2. 确认Node.js版本（建议18+）
3. 检查网络连接（云存储需要）
4. 查看详细错误日志

---

**老金优品云存储系统 v1.0**  
*支持图片/视频上传、付费下载、VIP会员功能* 